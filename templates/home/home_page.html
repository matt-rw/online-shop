{% extends 'base.html' %}

{% load static %}

{% block extra_css %}
  <!-- AOS (Animate On Scroll) Library -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css">
  <!-- Preconnect to external domains for faster loading -->
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://www.instagram.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

  <style>
    /* Film Camera / Polaroid Effect - Based on vintage film research */
    .film-camera {
      filter:
        blur(0.3px)
        sepia(8%)
        contrast(1.15)
        saturate(0.85)
        brightness(1.05)
        hue-rotate(-3deg);
    }

    /* Vignette overlay for authentic film look */
    .film-vignette::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at center, transparent 50%, rgba(0, 0, 0, 0.35) 100%);
      pointer-events: none;
      z-index: 1;
    }

    /* Warm color tint overlay for polaroid feel */
    .film-warm::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(0deg, rgba(153, 119, 34, 0.08), rgba(153, 119, 34, 0.08));
      mix-blend-mode: multiply;
      pointer-events: none;
      z-index: 1;
    }

    /* 3D Card Tilt Effect */
    .card-3d-wrapper {
      perspective: 1000px;
    }

    .card-3d {
      transform-style: preserve-3d;
      transition: transform 0.1s ease-out, box-shadow 0.3s ease-out;
    }

    .card-3d:hover {
      box-shadow: 0 10px 20px -8px rgba(0, 0, 0, 0.15);
    }

    .card-3d-content {
      transform: translateZ(20px);
    }

    @media (prefers-reduced-motion: reduce) {
      .card-3d {
        transform: none !important;
      }
    }

    /* News ticker animation */
    @keyframes ticker {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-50%);
      }
    }

    .ticker-animate {
      display: inline-flex;
      animation: ticker 25s linear infinite;
      white-space: nowrap;
      will-change: transform;
    }

    .ticker-wrapper {
      display: flex;
      overflow: hidden;
    }

    /* Smooth scroll snapping */
    html {
      scroll-behavior: smooth;
      scroll-snap-type: y mandatory;
    }

    .scroll-section {
      scroll-snap-align: start;
      scroll-snap-stop: always;
    }

    /* Blueprint Grid Overlay */
    .blueprint-grid {
      background-image:
        linear-gradient(rgba(250, 204, 21, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(250, 204, 21, 0.03) 1px, transparent 1px);
      background-size: 20px 20px;
      position: relative;
    }

    .blueprint-grid::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(250, 204, 21, 0.08) 2px, transparent 2px),
        linear-gradient(90deg, rgba(250, 204, 21, 0.08) 2px, transparent 2px);
      background-size: 100px 100px;
      pointer-events: none;
    }

    .blueprint-grid::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at center, transparent 0%, transparent 40%, rgba(255, 255, 255, 0.8) 100%);
      pointer-events: none;
      z-index: 1;
    }

    /* Technical Drawing Lines */
    .blueprint-corner {
      position: relative;
    }

    .blueprint-corner::before,
    .blueprint-corner::after {
      content: '';
      position: absolute;
      background: linear-gradient(to right, #fbbf24 0%, transparent 100%);
      height: 1px;
    }

    .blueprint-corner::before {
      top: 0;
      left: 0;
      width: 60px;
    }

    .blueprint-corner::after {
      top: 0;
      left: 0;
      width: 1px;
      height: 60px;
      background: linear-gradient(to bottom, #fbbf24 0%, transparent 100%);
    }

    /* Measurement Lines Animation */
    @keyframes measure-slide {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(10px); }
    }

    .blueprint-measure {
      animation: measure-slide 3s ease-in-out infinite;
    }

    /* Image Shimmer Effect */
    @keyframes shimmer {
      0% {
        transform: translateX(-100%) translateY(-100%) rotate(30deg);
      }
      100% {
        transform: translateX(100%) translateY(100%) rotate(30deg);
      }
    }

    .shimmer-effect {
      position: relative;
      overflow: hidden;
    }

    .shimmer-effect::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(250, 204, 21, 0.1),
        rgba(250, 204, 21, 0.3),
        rgba(250, 204, 21, 0.1),
        transparent
      );
      animation: shimmer 3s ease-in-out infinite;
      pointer-events: none;
    }

    /* Dark mode overrides for home page */
    [data-theme='dark'] #subscribe,
    [data-theme='dark'] #subscribe > div {
      background-color: #1a1a1a !important;
    }

    [data-theme='dark'] .text-black {
      color: #e5e5e5 !important;
    }

    [data-theme='dark'] .text-black-500 {
      color: #a3a3a3 !important;
    }

    [data-theme='dark'] .border-black {
      border-color: #404040 !important;
    }

    [data-theme='dark'] input[type="email"],
    [data-theme='dark'] input[type="tel"] {
      background-color: #262626 !important;
      color: #e5e5e5 !important;
      border-color: #404040 !important;
    }

    [data-theme='dark'] input[type="email"]::placeholder,
    [data-theme='dark'] input[type="tel"]::placeholder {
      color: #737373 !important;
    }

    [data-theme='dark'] .shadow-xl {
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 8px 10px -6px rgba(0, 0, 0, 0.5) !important;
    }

    /* Film Grain Effect */
    @keyframes grain {
      0%, 100% { transform: translate(0, 0); }
      10% { transform: translate(-5%, -10%); }
      20% { transform: translate(-15%, 5%); }
      30% { transform: translate(7%, -25%); }
      40% { transform: translate(-5%, 25%); }
      50% { transform: translate(-15%, 10%); }
      60% { transform: translate(15%, 0%); }
      70% { transform: translate(0%, 15%); }
      80% { transform: translate(3%, 35%); }
      90% { transform: translate(-10%, 10%); }
    }

    .film-grain {
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      animation: grain 8s steps(10) infinite;
    }

    /* Manifesto section animations */
    @keyframes slideInRight {
      0% {
        transform: translateX(-100%);
        opacity: 0;
      }
      15% {
        transform: translateX(0);
        opacity: 1;
      }
      85% {
        transform: translateX(0);
        opacity: 1;
      }
      100% {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    @keyframes slideInLeft {
      0% {
        transform: translateX(100%);
        opacity: 0;
      }
      15% {
        transform: translateX(0);
        opacity: 1;
      }
      85% {
        transform: translateX(0);
        opacity: 1;
      }
      100% {
        transform: translateX(-100%);
        opacity: 0;
      }
    }

    @keyframes fadeInOut {
      0% {
        opacity: 0;
      }
      15% {
        opacity: 1;
      }
      85% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }

    .manifesto-line {
      opacity: 0;
    }

    .manifesto-slide-right {
      animation: slideInRight 6s ease-in-out forwards;
    }

    .manifesto-slide-left {
      animation: slideInLeft 6s ease-in-out forwards;
    }

    .manifesto-fade {
      animation: fadeInOut 6s ease-in-out forwards;
    }

    /* Loop the animations */
    .manifesto-section.in-view .manifesto-slide-right {
      animation: slideInRight 6s ease-in-out infinite;
    }

    .manifesto-section.in-view .manifesto-slide-left {
      animation: slideInLeft 6s ease-in-out infinite;
    }

    .manifesto-section.in-view .manifesto-fade {
      animation: fadeInOut 6s ease-in-out infinite;
    }

    /* Fingerprint stamp animation - commented out for now
    @keyframes fingerprintStamp {
      0%, 35% {
        opacity: 0;
      }
      50% {
        opacity: 0.35;
      }
      65%, 100% {
        opacity: 0;
      }
    }

    .fingerprint-stamp {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 200px;
      height: 200px;
      pointer-events: none;
      opacity: 0;
      z-index: 20;
    }

    .manifesto-section.in-view .fingerprint-stamp {
      animation: fingerprintStamp 6s ease-in-out infinite;
    }
    */
  </style>

{% endblock %}

{% block content %}
  <!-- Debug Grid Overlay (dev tool - only in DEBUG mode) -->
  {% if DEBUG %}
    <script src="https://cdn.jsdelivr.net/npm/debug-grid-overlay-custom@1.0.5/index.min.js"></script>
  {% endif %}

  <!-- ============================================ -->
  <!-- HERO SECTION -->
  <!-- ============================================ -->
  <section class="scroll-section relative bg-center w-full overflow-hidden bg-black" style="height: 75vh;">

    <!-- Subtle gradient background (matching nav bar) -->
    <div class="absolute inset-0" style="background: linear-gradient(to right, rgba(88, 28, 135, 0.2) 0%, transparent 12%, transparent 88%, rgba(159, 18, 57, 0.2) 100%);"></div>

    <!-- Slideshow backgrounds with vintage film effect -->
    {% if hero_slides %}
      <!-- Dynamic slides from database -->
      {% for slide in hero_slides %}
        <div class="absolute inset-0 hero-slide hero-slide-{{ forloop.counter }} film-camera film-vignette film-warm" style="{% if forloop.first %}opacity: 1; z-index: 2;{% else %}opacity: 0; z-index: 1;{% endif %} transition: opacity 0.45s ease-out;">
          {% if slide.is_split %}
            <!-- Split view: two images side by side -->
            <div class="absolute inset-0 flex gap-0">
              <div class="hidden md:block overflow-hidden" style="width: 70%;">
                <div class="w-full h-full hero-slide-img"
                     data-zoom="{{ slide.zoom|default:100 }}"
                     data-pos-x="{{ slide.position_x|default:50 }}"
                     data-pos-y="{{ slide.position_y|default:50 }}"
                     data-mobile-zoom="{{ slide.mobile_zoom|default:slide.zoom|default:100 }}"
                     data-mobile-pos-x="{{ slide.mobile_position_x|default:slide.position_x|default:50 }}"
                     data-mobile-pos-y="{{ slide.mobile_position_y|default:slide.position_y|default:50 }}"
                     style="background-image: url('{{ slide.image_url }}'); background-size: cover;">
                </div>
              </div>
              <div class="w-full md:w-[30%] overflow-hidden">
                <div class="w-full h-full" style="background-image: url('{{ slide.split_image_url|default:slide.image_url }}'); background-size: cover; background-position: center;"></div>
              </div>
            </div>
          {% else %}
            <!-- Single image -->
            <div class="absolute inset-0 overflow-hidden">
              <div class="w-full h-full hero-slide-img"
                   data-zoom="{{ slide.zoom|default:100 }}"
                   data-pos-x="{{ slide.position_x|default:50 }}"
                   data-pos-y="{{ slide.position_y|default:50 }}"
                   data-mobile-zoom="{{ slide.mobile_zoom|default:slide.zoom|default:100 }}"
                   data-mobile-pos-x="{{ slide.mobile_position_x|default:slide.position_x|default:50 }}"
                   data-mobile-pos-y="{{ slide.mobile_position_y|default:slide.position_y|default:50 }}"
                   style="background-image: url('{{ slide.image_url }}'); background-size: cover;">
              </div>
            </div>
          {% endif %}
          {% if slide.link_url %}
            <a href="{{ slide.link_url }}" class="absolute inset-0 z-10"></a>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <!-- Fallback: Default hardcoded slides -->
      <div class="absolute inset-0 hero-slide hero-slide-1 film-camera film-vignette film-warm" style="opacity: 1; z-index: 2; transition: opacity 0.45s ease-out;">
        <!-- Split view: left and right images -->
        <div class="absolute inset-0 flex gap-0">
          <div class="hidden md:block" style="width: 70%; background-image: url('{% static 'images/nature_shots/full-dark.jpeg' %}'); background-size: cover; background-position: 85% center; background-repeat: no-repeat;"></div>
          <div class="w-full md:w-[30%]" style="background-image: url('{% static 'images/nature_shots/full-top-forward.jpeg' %}'); background-size: cover; background-position: 10% center; background-repeat: no-repeat;"></div>
        </div>
      </div>
      <div class="absolute inset-0 hero-slide hero-slide-2 film-camera film-vignette film-warm" style="background-image: url('{% static 'images/hollywood_shots/cream-tee-back-centered.jpeg' %}'); background-size: cover; background-position: center 30%; background-repeat: no-repeat; opacity: 0; z-index: 1; transition: opacity 0.45s ease-out;"></div>
      <div class="absolute inset-0 hero-slide hero-slide-3 film-camera film-vignette film-warm" style="background-image: url('{% static 'images/nature_shots/pants-bottom-low.jpeg' %}'); background-size: cover; background-position: center center; background-repeat: no-repeat; opacity: 0; z-index: 1; transition: opacity 0.45s ease-out;"></div>
      <div class="absolute inset-0 hero-slide hero-slide-4 film-camera film-vignette film-warm" style="background-image: url('{% static 'images/hollywood_shots/black-tee-vitruvian-back.jpeg' %}'); background-size: cover; background-position: center 25%; background-repeat: no-repeat; opacity: 0; z-index: 1; transition: opacity 0.45s ease-out;"></div>
    {% endif %}

    <!-- Nav bar gradient overlay (matching nav bar exactly) -->
    <div class="absolute inset-0" style="background: linear-gradient(to right, rgba(88, 28, 135, 0.1) 0%, transparent 12%, transparent 88%, rgba(159, 18, 57, 0.1) 100%);"></div>


    <!-- Slideshow navigation -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-30 flex items-center gap-4" id="hero-dots">
      {% if hero_slides %}
        {% for slide in hero_slides %}
          <button onclick="changeHeroSlide({{ forloop.counter }})" class="hero-dot hero-dot-{{ forloop.counter }} w-4 h-4 rounded-full {% if forloop.first %}bg-white{% else %}bg-white/50{% endif %} transition-all duration-300 hover:scale-125 cursor-pointer shadow-lg"></button>
        {% endfor %}
      {% else %}
        <button onclick="changeHeroSlide(1)" class="hero-dot hero-dot-1 w-4 h-4 rounded-full bg-white transition-all duration-300 hover:scale-125 cursor-pointer shadow-lg"></button>
        <button onclick="changeHeroSlide(2)" class="hero-dot hero-dot-2 w-4 h-4 rounded-full bg-white/50 transition-all duration-300 hover:scale-125 cursor-pointer shadow-lg"></button>
        <button onclick="changeHeroSlide(3)" class="hero-dot hero-dot-3 w-4 h-4 rounded-full bg-white/50 transition-all duration-300 hover:scale-125 cursor-pointer shadow-lg"></button>
        <button onclick="changeHeroSlide(4)" class="hero-dot hero-dot-4 w-4 h-4 rounded-full bg-white/50 transition-all duration-300 hover:scale-125 cursor-pointer shadow-lg"></button>
      {% endif %}
    </div>

    <!-- Blueprint Technical Grid Pattern -->
    <div class="absolute inset-0 opacity-20 z-0">
      <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
        <defs>
          <pattern id="blueprintGrid" width="100" height="100" patternUnits="userSpaceOnUse">
            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="rgba(250, 204, 21, 0.3)" stroke-width="0.5"/>
            <path d="M 50 0 L 50 100 M 0 50 L 100 50" fill="none" stroke="rgba(250, 204, 21, 0.15)" stroke-width="0.5" stroke-dasharray="2,2"/>
          </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#blueprintGrid)" />
      </svg>
    </div>

    <!-- Blueprint Technical Drawing Lines -->
    <div class="absolute inset-0 opacity-25 z-0">
      <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080">
        <defs>
          <linearGradient id="blueprintYellow" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:rgb(250, 204, 21);stop-opacity:0.8" />
            <stop offset="100%" style="stop-color:rgb(245, 158, 11);stop-opacity:0.6" />
          </linearGradient>
        </defs>

        <!-- Horizontal construction lines -->
        <line x1="0" y1="200" x2="1920" y2="200" stroke="url(#blueprintYellow)" stroke-width="1" stroke-dasharray="10,5" opacity="0.6"/>
        <line x1="0" y1="400" x2="1920" y2="400" stroke="url(#blueprintYellow)" stroke-width="1.5" opacity="0.8"/>
        <line x1="0" y1="600" x2="1920" y2="600" stroke="url(#blueprintYellow)" stroke-width="1" stroke-dasharray="10,5" opacity="0.6"/>
        <line x1="0" y1="800" x2="1920" y2="800" stroke="url(#blueprintYellow)" stroke-width="1" stroke-dasharray="5,3" opacity="0.5"/>

        <!-- Vertical construction lines -->
        <line x1="400" y1="0" x2="400" y2="1080" stroke="url(#blueprintYellow)" stroke-width="1" stroke-dasharray="10,5" opacity="0.6"/>
        <line x1="960" y1="0" x2="960" y2="1080" stroke="url(#blueprintYellow)" stroke-width="1.5" opacity="0.8"/>
        <line x1="1520" y1="0" x2="1520" y2="1080" stroke="url(#blueprintYellow)" stroke-width="1" stroke-dasharray="10,5" opacity="0.6"/>

        <!-- Diagonal architectural lines -->
        <line x1="0" y1="0" x2="600" y2="400" stroke="url(#blueprintYellow)" stroke-width="0.5" stroke-dasharray="3,3" opacity="0.4"/>
        <line x1="1920" y1="0" x2="1320" y2="400" stroke="url(#blueprintYellow)" stroke-width="0.5" stroke-dasharray="3,3" opacity="0.4"/>
      </svg>
    </div>

    <!-- Blueprint Measurement Marks -->
    <div class="absolute top-12 left-12 text-yellow-400 font-mono text-xs opacity-40">
      <div class="flex flex-col gap-4">
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 border-2 border-yellow-400 rounded-full"></div>
          <div class="w-16 h-px bg-yellow-400"></div>
          <span>A1</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 border-2 border-yellow-400"></div>
          <div class="w-16 h-px bg-yellow-400"></div>
          <span>A2</span>
        </div>
      </div>
    </div>

    <div class="absolute top-12 right-12 text-yellow-400 font-mono text-xs opacity-40 text-right">
      <div class="flex flex-col gap-4 items-end">
        <div class="flex items-center gap-2">
          <span>REV.001</span>
          <div class="w-16 h-px bg-yellow-400"></div>
          <div class="w-3 h-3 border-2 border-yellow-400 rounded-full"></div>
        </div>
        <div class="flex items-center gap-2">
          <span>2025</span>
          <div class="w-16 h-px bg-yellow-400"></div>
          <div class="w-3 h-3 border-2 border-yellow-400"></div>
        </div>
      </div>
    </div>

    <!-- Blueprint Corner Registration Marks -->
    <div class="absolute top-0 left-0 w-24 h-24 border-l-2 border-t-2 border-yellow-400 opacity-30"></div>
    <div class="absolute top-0 right-0 w-24 h-24 border-r-2 border-t-2 border-yellow-400 opacity-30"></div>
    <div class="absolute bottom-0 left-0 w-24 h-24 border-l-2 border-b-2 border-yellow-400 opacity-30"></div>
    <div class="absolute bottom-0 right-0 w-24 h-24 border-r-2 border-b-2 border-yellow-400 opacity-30"></div>

    <!-- Golden Ratio Spiral (Fibonacci) - LARGE & PROMINENT -->
    <div class="absolute top-0 right-0 w-full h-full opacity-30 z-0" style="transform: rotate(-15deg) scale(1.4); transform-origin: 70% 40%;">
      <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800" preserveAspectRatio="xMidYMid meet">
        <defs>
          <linearGradient id="goldenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:rgb(250, 204, 21);stop-opacity:1" />
            <stop offset="50%" style="stop-color:rgb(251, 191, 36);stop-opacity:0.8" />
            <stop offset="100%" style="stop-color:rgb(245, 158, 11);stop-opacity:0.6" />
          </linearGradient>
        </defs>

        <!-- Fibonacci spiral - larger arcs -->
        <path d="M 400 400 Q 400 300 500 300" stroke="url(#goldenGrad)" stroke-width="3" fill="none" opacity="0.9"/>
        <path d="M 500 300 Q 600 300 600 400" stroke="url(#goldenGrad)" stroke-width="3" fill="none" opacity="0.9"/>
        <path d="M 600 400 Q 600 560 440 560" stroke="url(#goldenGrad)" stroke-width="3" fill="none" opacity="0.9"/>
        <path d="M 440 560 Q 180 560 180 300" stroke="url(#goldenGrad)" stroke-width="3" fill="none" opacity="0.9"/>
        <path d="M 180 300 Q 180 40 500 40" stroke="url(#goldenGrad)" stroke-width="3" fill="none" opacity="0.9"/>
        <path d="M 500 40 Q 820 40 820 400" stroke="url(#goldenGrad)" stroke-width="3" fill="none" opacity="0.85"/>

        <!-- Fibonacci rectangles with stronger presence -->
        <rect x="400" y="300" width="100" height="100" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.7"/>
        <rect x="500" y="300" width="100" height="100" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.7"/>
        <rect x="440" y="400" width="160" height="160" stroke="#fbbf24" stroke-width="1.8" fill="none" opacity="0.6"/>
        <rect x="180" y="300" width="260" height="260" stroke="#fbbf24" stroke-width="1.6" fill="none" opacity="0.55"/>
        <rect x="180" y="40" width="420" height="420" stroke="#fbbf24" stroke-width="1.4" fill="none" opacity="0.5"/>
        <rect x="500" y="40" width="320" height="320" stroke="#fbbf24" stroke-width="1.2" fill="none" opacity="0.45"/>

        <!-- Golden ratio markers -->
        <circle cx="400" cy="300" r="4" fill="#fbbf24" opacity="0.9"/>
        <circle cx="500" cy="300" r="4" fill="#fbbf24" opacity="0.9"/>
        <circle cx="600" cy="400" r="4" fill="#fbbf24" opacity="0.9"/>
        <circle cx="440" cy="560" r="4" fill="#fbbf24" opacity="0.9"/>

        <!-- Phi notation -->
        <text x="420" y="380" font-family="monospace" font-size="18" fill="#fbbf24" opacity="0.6">φ</text>
        <text x="620" y="420" font-family="monospace" font-size="14" fill="#fbbf24" opacity="0.5">1.618</text>
      </svg>
    </div>

    <div class="relative z-10 flex flex-col items-center justify-center h-full text-white">
      <a href="{% url 'home' %}" class="block group">
        <img src="{% static 'images/font.webp' %}?v=2"
             class="h-24 sm:h-48 md:h-48 lg:h-64 w-auto transition-all duration-300 group-hover:scale-105"
             style="filter: drop-shadow(0 0 10px rgba(0,0,0,0.8)) drop-shadow(0 0 30px rgba(0,0,0,0.6));"
             alt="Blueprint Apparel"
             width="400"
             height="100" />
      </a>
      {% if site_settings.hero_title or site_settings.hero_subtitle %}
        <div class="text-center mt-8 px-4">
          {% if site_settings.hero_title %}
            <h1 class="text-4xl md:text-6xl font-bold mb-4 text-white">{{ site_settings.hero_title }}</h1>
          {% endif %}
          {% if site_settings.hero_subtitle %}
            <p class="text-xl md:text-2xl text-yellow-400">{{ site_settings.hero_subtitle }}</p>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </section>

  <!-- ============================================ -->
  <!-- NEWS TICKER BANNER -->
  <!-- ============================================ -->
  <div class="w-full bg-black py-4 overflow-hidden relative ticker-wrapper">
    <div class="ticker-animate font-mono font-bold text-base text-yellow-400">
      <span>FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;</span>
      <span aria-hidden="true">FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;FOUNDATION RELEASE COMING SOON!&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;</span>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- SIGNUP MODAL POPUP -->
  <!-- ============================================ -->
  <div id="signup-modal" class="fixed inset-0 backdrop-blur-xl bg-white/10 z-50 flex items-center justify-center hidden transition-all duration-300 opacity-0">
    <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full mx-4 transform transition-all duration-300 scale-95 modal-content relative">
      <!-- Close Button -->
      <button type="button" onclick="closeSignupModal()" class="absolute top-5 right-5 text-gray-400 hover:text-gray-700 transition-colors z-10 p-1 hover:bg-gray-100 rounded-full">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <!-- Modal Content -->
      <div class="px-8 py-10 sm:px-10 sm:py-12">
        <!-- Logo or Icon -->
        <div class="text-center mb-8">
          <div class="relative inline-block mb-5">
            <!-- Colorful glow effect (bottom layer) -->
            <div class="absolute inset-0 -m-2 bg-gradient-to-r from-purple-400 via-fuchsia-400 to-rose-400 rounded-full blur-md z-0"></div>
            <div class="absolute inset-0 -m-3 bg-gradient-to-r from-purple-500 via-fuchsia-500 to-rose-500 rounded-full blur-lg z-0"></div>
            <div class="absolute inset-0 -m-5 bg-gradient-to-r from-purple-600 via-fuchsia-600 to-rose-600 rounded-full blur-xl opacity-70 z-0"></div>
            <!-- Black glow ring around the logo (middle layer - transition) -->
            <div class="absolute -inset-0.5 bg-black rounded-full blur-sm z-[5]"></div>
            <div class="absolute -inset-1 bg-black rounded-full blur-md opacity-70 z-[5]"></div>
            <div class="absolute -inset-2 bg-black rounded-full blur-lg opacity-40 z-[5]"></div>
            <!-- Logo on top -->
            <img src="{% static 'images/blueprint_b_circular.png' %}" alt="Blueprint" class="relative z-10 w-20 h-20" style="mask-image: radial-gradient(circle, black 85%, transparent 100%); -webkit-mask-image: radial-gradient(circle, black 85%, transparent 100%);" />
          </div>
          <h2 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-3 leading-tight tracking-tight">Join Blueprint</h2>
          <p class="text-gray-600 text-lg sm:text-xl leading-relaxed max-w-sm mx-auto" style="text-wrap: balance;">
            Get early access to the Foundation drop plus <strong class="text-gray-800">10% off</strong> your first order
          </p>
        </div>

        <!-- Messages -->
        {% if messages %}
          <div class="mb-6" id="modal-message-container">
            {% for message in messages %}
              <div class="message-alert px-4 py-3.5 rounded-xl text-left text-base font-medium mb-2
                          {% if message.tags == 'success' %}
                            bg-green-50 text-green-900 border border-green-200
                          {% elif message.tags == 'error' %}
                            bg-red-50 text-red-900 border border-red-200
                          {% elif message.tags == 'warning' %}
                            bg-yellow-50 text-yellow-900 border border-yellow-200
                          {% else %}
                            bg-blue-50 text-blue-900 border border-blue-200
                          {% endif %}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}

        <!-- Smart Signup Form (Auto-detects Email or SMS) -->
        <form id="modal-smart-form"
              method="POST"
              onsubmit="return handleModalSmartSubmit(event)"
              class="space-y-5">
          {% csrf_token %}
          <div>
            <label for="modal-contact-input" class="block text-sm font-semibold text-gray-900 mb-2">
              Email or Phone Number
            </label>
            <input type="text"
                   id="modal-contact-input"
                   name="contact"
                   placeholder="Enter email or phone"
                   required
                   oninput="updateModalInputType(this)"
                   class="w-full px-4 py-3.5 text-base rounded-xl border-2 border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400 font-medium" />
            <input type="hidden" id="modal-email-field" name="email" value="">
            <input type="hidden" id="modal-phone-field" name="phone_number" value="">
            <p id="modal-input-hint" class="text-sm font-medium text-gray-600 mt-2.5 opacity-0 transition-opacity">
              <!-- Hint will appear here -->
            </p>
          </div>
          <button type="submit"
                  class="w-full px-6 py-4 text-lg rounded-xl bg-gray-900 text-white font-bold hover:bg-gray-800 active:bg-black transition-all shadow-xl hover:shadow-2xl hover:scale-105 transform">
            Get Early Access
          </button>
        </form>
        <p id="modal-sms-disclaimer" class="text-sm text-gray-600 mt-4 text-left leading-relaxed opacity-0 transition-opacity">
          By subscribing, you agree to receive marketing texts. Reply STOP to unsubscribe.
        </p>
      </div>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- PRODUCTS SECTION - OFF-WHITE / MOMA INSPIRED -->
  <!-- ============================================ -->
  <section class="bg-white">
    <!-- Section Header -->
    <div class="border-b border-black">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <span class="text-xs tracking-widest uppercase font-medium">"Foundation"</span>
        <span class="text-xs tracking-wider text-neutral-500">001 / {% if featured_products %}{{ featured_products|length|stringformat:"03d" }}{% else %}000{% endif %}</span>
      </div>
    </div>

    <!-- Product Grid -->
    <div class="max-w-7xl mx-auto">
      <div style="display: grid; grid-template-columns: repeat({% if featured_products|length == 1 %}2{% else %}{{ featured_products|length|default:2 }}{% endif %}, 1fr);">

        {% for product in featured_products %}
        <a href="{% url 'shop:product_detail' slug=product.slug %}" class="group block {% if not forloop.last %}border-r border-black{% endif %}">
          <div class="overflow-hidden mx-auto" style="aspect-ratio: 4/5; max-height: 65vh; width: 100%; max-width: calc(65vh * 0.8);">
            {% if product.images %}
            <img src="{{ product.images.0 }}"
                 alt="{{ product.name }}"
                 class="w-full h-full object-cover transition-all duration-700 group-hover:scale-105" />
            {% else %}
            {% with first_variant=product.variants.first %}
            {% if first_variant and first_variant.images %}
            <img src="{{ first_variant.images.0 }}"
                 alt="{{ product.name }}"
                 class="w-full h-full object-cover transition-all duration-700 group-hover:scale-105" />
            {% else %}
            <div class="w-full h-full bg-neutral-100 flex items-center justify-center">
              <span class="text-neutral-400">No image</span>
            </div>
            {% endif %}
            {% endwith %}
            {% endif %}
          </div>
          <div class="border-t border-black p-4 flex justify-between items-start">
            <div>
              <p class="text-xs text-neutral-500 uppercase tracking-wider mb-1">{{ product.category_obj.name|default:"Products" }}</p>
              <h3 class="text-sm font-medium tracking-wide">"{{ product.name|upper }}"</h3>
            </div>
            <span class="text-sm font-medium">${{ product.base_price|floatformat:0 }}</span>
          </div>
        </a>
        {% empty %}
        <div class="col-span-2 p-12 text-center text-neutral-500">
          <p>No featured products yet.</p>
        </div>
        {% endfor %}

      </div>
    </div>

    <!-- Section Footer -->
    <div class="border-t border-black">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-end items-center">
        <a href="{% url 'shop:shop' %}" class="text-xs tracking-widest uppercase font-medium hover:opacity-70 transition-opacity">View All →</a>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- MANIFESTO SECTION -->
  <!-- ============================================ -->
  <section class="bg-white py-8 md:py-12 px-4 md:px-8">
    <div id="manifesto-section" class="manifesto-section relative bg-black py-12 md:py-32 overflow-hidden max-w-5xl mx-auto">
      <!-- Main content -->
      <div class="relative z-10 max-w-4xl mx-auto px-6 text-center">
      <!-- Line 1 - slides right -->
      <div class="mb-6 md:mb-8 overflow-hidden">
        <span class="inline-block text-yellow-400 text-2xl sm:text-3xl md:text-5xl font-mono font-medium tracking-wide uppercase manifesto-line manifesto-slide-right">
          FORGET THE TRENDS
        </span>
      </div>

      <!-- Decorative divider -->
      <div class="flex items-center justify-center gap-4 mb-6 md:mb-8 manifesto-line manifesto-fade" style="animation-delay: 0.3s;">
        <div class="w-12 md:w-24 h-px bg-gradient-to-r from-transparent to-yellow-400/60"></div>
        <div class="w-2 h-2 bg-yellow-400 rotate-45"></div>
        <div class="w-12 md:w-24 h-px bg-gradient-to-l from-transparent to-yellow-400/60"></div>
      </div>

      <!-- Line 2 - slides left -->
      <div class="mb-6 md:mb-8 overflow-hidden">
        <span class="inline-block text-white text-3xl sm:text-4xl md:text-6xl font-mono font-bold tracking-tight uppercase manifesto-line manifesto-slide-left" style="animation-delay: 0.5s;">
          REMEMBER THE BLUEPRINT
        </span>
      </div>

      <!-- Decorative divider -->
      <div class="flex items-center justify-center gap-4 mb-6 md:mb-8 manifesto-line manifesto-fade" style="animation-delay: 0.8s;">
        <div class="w-12 md:w-24 h-px bg-gradient-to-r from-transparent to-yellow-400/60"></div>
        <div class="w-2 h-2 bg-yellow-400 rotate-45"></div>
        <div class="w-12 md:w-24 h-px bg-gradient-to-l from-transparent to-yellow-400/60"></div>
      </div>

      <!-- Line 3 - slides right -->
      <div class="overflow-hidden">
        <span class="inline-block text-yellow-400 text-2xl sm:text-3xl md:text-5xl font-mono font-medium tracking-widest uppercase manifesto-line manifesto-slide-right" style="animation-delay: 1s;">
          FOLLOW YOUR PATH
        </span>
      </div>
      </div>

      <!-- Fingerprint stamp overlay - commented out for now
      <div class="fingerprint-stamp">
        <svg class="w-full h-full" viewBox="0 0 122.88 121.74" fill="#facc15" xmlns="http://www.w3.org/2000/svg">
          <path d="M32.18,105.73c0.7-1.11,2.16-1.44,3.27-0.74c1.11,0.7,1.44,2.16,0.74,3.27l-4.81,7.68c-0.7,1.11-2.16,1.44-3.27,0.74 c-1.11-0.7-1.44-2.16-0.74-3.27L32.18,105.73L32.18,105.73z M6.57,75.32c0.33,1.27-0.42,2.57-1.69,2.9 c-1.27,0.33-2.57-0.42-2.9-1.69c-0.39-1.5-0.73-3.01-1.02-4.54c-0.28-1.52-0.5-3.03-0.66-4.54c-0.1-0.98-0.18-1.98-0.22-2.99 C0.02,63.37,0,62.36,0,61.44C0,44.47,6.88,29.11,18,18C29.11,6.88,44.47,0,61.44,0c16.97,0,32.34,6.83,43.47,17.91 c11.11,11.06,17.97,26.36,17.97,43.3c0,1.31-1.07,2.38-2.38,2.38c-1.31,0-2.38-1.07-2.38-2.38c0-15.64-6.33-29.74-16.56-39.93 C91.3,11.06,77.12,4.76,61.44,4.76c-15.65,0-29.82,6.34-40.08,16.6C11.11,31.62,4.76,45.79,4.76,61.44c0,1.04,0.02,1.97,0.06,2.8 c0.04,0.91,0.11,1.82,0.2,2.73c0.15,1.4,0.35,2.79,0.61,4.17C5.89,72.51,6.2,73.9,6.57,75.32L6.57,75.32z M12.97,96.87 c-0.99,0.86-2.49,0.75-3.35-0.24c-0.86-0.99-0.75-2.49,0.24-3.35c0.6-0.52,1.13-1.14,1.58-1.86c0.47-0.74,0.86-1.61,1.17-2.6 c1.59-5.06,0.63-10.34-0.34-15.69c-0.66-3.64-1.33-7.31-1.3-11.14c0.12-19.6,12.38-35.58,28.42-43.77 c6.73-3.44,14.15-5.5,21.63-5.89c7.51-0.39,15.08,0.93,22.07,4.25C98.7,24,111.38,41.37,114.02,72.13 c0.11,1.31-0.87,2.46-2.18,2.57c-1.31,0.11-2.46-0.87-2.57-2.18c-2.47-28.79-14.02-44.89-28.21-51.64 c-6.26-2.98-13.05-4.15-19.8-3.81c-6.79,0.35-13.55,2.24-19.71,5.38C26.96,29.89,15.82,44.34,15.71,62 c-0.02,3.4,0.61,6.86,1.23,10.29c1.08,5.94,2.14,11.8,0.21,17.95c-0.43,1.38-1,2.62-1.69,3.72C14.76,95.07,13.92,96.04,12.97,96.87 L12.97,96.87z M109.22,82.01c0-1.32,1.07-2.38,2.38-2.38s2.38,1.07,2.38,2.38v9.98c0,1.32-1.07,2.38-2.38,2.38 s-2.38-1.07-2.38-2.38V82.01L109.22,82.01z M20.01,106.56c-0.98,0.87-2.48,0.78-3.35-0.2c-0.87-0.98-0.78-2.48,0.2-3.35 c2.95-2.6,5.1-5.96,6.34-10.17c1.28-4.34,1.6-9.61,0.85-15.92c-1.38-6.78-1.63-13.04-0.82-18.69c0.84-5.91,2.84-11.15,5.89-15.63 c0.74-1.08,2.22-1.36,3.3-0.62c1.08,0.74,1.36,2.22,0.62,3.3c-2.64,3.87-4.37,8.44-5.11,13.62c-0.73,5.13-0.5,10.84,0.77,17.07 c0.03,0.12,0.06,0.24,0.07,0.36c0.84,6.97,0.45,12.88-1.01,17.85C26.26,99.28,23.63,103.36,20.01,106.56L20.01,106.56z M44.18,34.97c-1.14,0.66-2.59,0.27-3.25-0.87c-0.66-1.14-0.27-2.59,0.87-3.25c2.66-1.54,5.5-2.76,8.43-3.65 c8.04-2.44,16.77-2.37,24.71,0.41c7.98,2.8,15.15,8.32,20.03,16.77c1.63,2.81,3,5.96,4.06,9.45c1.51,4.98,2.54,10.54,3.07,16.65 c0.52,6.01,0.55,12.61,0.09,19.79c0,0.07-0.01,0.13-0.02,0.2l-1.66,16.38c-0.13,1.3-1.29,2.26-2.6,2.13 c-1.3-0.13-2.26-1.29-2.13-2.6l1.66-16.4l0-0.01c0.44-6.91,0.41-13.29-0.09-19.1c-0.5-5.82-1.46-11.05-2.86-15.66 c-0.94-3.11-2.17-5.92-3.63-8.45c-4.27-7.4-10.53-12.23-17.48-14.67c-6.99-2.45-14.68-2.51-21.77-0.36 C49.04,32.53,46.55,33.6,44.18,34.97L44.18,34.97z M38.95,98.15c-0.23,1.29-1.46,2.16-2.75,1.93c-1.29-0.23-2.16-1.46-1.93-2.75 c0.55-3.08,0.86-6.53,0.97-10.29c0.11-3.81,0.02-7.98-0.24-12.44c-0.05-0.96-0.14-2.15-0.22-3.31c-0.54-7.59-0.97-13.71,3.47-21.6 c0.98-1.74,2.15-3.36,3.55-4.84c1.4-1.48,3.01-2.82,4.84-3.99c0.12-0.08,0.24-0.14,0.37-0.19c2.71-1.3,5.4-2.31,8.09-2.97 c2.77-0.68,5.52-0.98,8.23-0.83c1.31,0.07,2.32,1.18,2.25,2.49c-0.07,1.31-1.18,2.32-2.49,2.25c-2.25-0.12-4.54,0.13-6.87,0.7 c-2.32,0.57-4.7,1.46-7.12,2.62c-1.47,0.95-2.75,2.01-3.84,3.17c-1.12,1.19-2.07,2.49-2.86,3.91c-3.74,6.66-3.36,12.14-2.88,18.94 c0.07,1,0.14,2.04,0.22,3.38c0.26,4.54,0.35,8.84,0.24,12.83C39.85,91.22,39.53,94.9,38.95,98.15L38.95,98.15z M72.44,44.51 c-1.12-0.68-1.47-2.15-0.79-3.26c0.68-1.12,2.14-1.47,3.26-0.79c0.73,0.45,1.44,0.93,2.13,1.45c0.68,0.51,1.35,1.07,2.02,1.68 c9.06,8.23,12.13,21.46,12.33,35.3c0.19,13.48-2.34,27.54-4.66,37.91c-0.28,1.28-1.55,2.09-2.83,1.8c-1.28-0.28-2.09-1.55-1.8-2.83 c2.26-10.12,4.74-23.81,4.55-36.83c-0.18-12.66-2.88-24.65-10.79-31.84c-0.55-0.5-1.12-0.97-1.69-1.4 C73.6,45.25,73.02,44.86,72.44,44.51L72.44,44.51z M43.15,119.69c-0.76,1.07-2.24,1.33-3.31,0.57c-1.07-0.76-1.33-2.24-0.57-3.31 c1.68-2.37,3.1-4.97,4.26-7.79c1.16-2.84,2.06-5.93,2.68-9.27c1.16-6.23,0.61-14.17,0.08-21.67c-0.18-2.53-0.35-5-0.46-7.54 c-0.16-3.71-0.23-7.35,0.46-10.66c0.75-3.61,2.37-6.74,5.62-9.02c0.73-0.51,1.52-0.97,2.37-1.36c0.85-0.39,1.77-0.74,2.76-1.02 c0.74-0.21,1.47-0.38,2.18-0.5c4.87-0.83,8.73,0.43,11.71,3.03c2.83,2.47,4.75,6.11,5.93,10.24c0.35,1.24,0.64,2.53,0.87,3.85 c0.12,0.72,0.23,1.45,0.31,2.18c0.08,0.72,0.15,1.46,0.2,2.22c0.5,7.54,0.17,16.95-0.85,26.16c-0.98,8.83-2.6,17.53-4.75,24.3 c-0.4,1.25-1.73,1.94-2.98,1.55c-1.25-0.4-1.94-1.73-1.55-2.98c2.04-6.43,3.59-14.81,4.54-23.38c0.99-8.95,1.31-18.06,0.83-25.34 c-0.04-0.63-0.1-1.29-0.18-1.97c-0.07-0.64-0.17-1.28-0.28-1.91c-0.2-1.14-0.45-2.26-0.75-3.35c-0.94-3.31-2.4-6.15-4.48-7.96 c-1.92-1.67-4.47-2.47-7.77-1.91c-0.53,0.09-1.09,0.22-1.68,0.39c-0.77,0.22-1.46,0.47-2.07,0.76c-0.62,0.29-1.17,0.6-1.64,0.93 c-2.09,1.46-3.16,3.59-3.68,6.09c-0.58,2.79-0.51,6.1-0.37,9.49c0.1,2.25,0.28,4.81,0.46,7.43c0.54,7.78,1.12,16.01-0.16,22.85 c-0.68,3.65-1.67,7.04-2.96,10.2C46.64,114.11,45.04,117.02,43.15,119.69L43.15,119.69z M59.44,62.15 c-0.24-1.29,0.62-2.53,1.91-2.76c1.29-0.24,2.53,0.62,2.76,1.91c1.21,6.52,1.79,13.11,1.81,19.73c0.02,6.59-0.52,13.21-1.54,19.84 c-0.2,1.29-1.41,2.18-2.71,1.98c-1.29-0.2-2.18-1.41-1.98-2.71c0.99-6.38,1.51-12.76,1.49-19.11C61.16,74.7,60.6,68.4,59.44,62.15 L59.44,62.15z M56.72,108.31c0.28-1.28,1.55-2.09,2.83-1.8c1.28,0.28,2.09,1.55,1.8,2.83l-2.08,9.37c-0.28,1.28-1.55,2.09-2.83,1.8 c-1.28-0.28-2.09-1.55-1.8-2.83L56.72,108.31L56.72,108.31z"/>
        </svg>
      </div>
      -->
    </div>
  </section>

  <!-- ============================================ -->
  <!-- LIFESTYLE IMAGE SECTION -->
  <!-- ============================================ -->
  {% if gallery_images %}
  <section class="w-full bg-white py-12 md:py-20">
    <div class="gallery-container">
      <div class="gallery-layout">
        {% for img in gallery_images %}
        {% with layout=img.layout|default:"full" %}
        <div class="gallery-item{% if layout == 'half' %} gallery-half{% endif %}">
          <img src="{{ img.image_url }}"
               alt="{{ img.alt_text|default:'Blueprint Apparel' }}"
               class="w-full h-auto gallery-img"
               data-zoom="{{ img.zoom|default:100 }}"
               data-pos-x="{{ img.position_x|default:50 }}"
               data-pos-y="{{ img.position_y|default:50 }}" />
        </div>
        {% endwith %}
        {% endfor %}
      </div>
    </div>
  </section>
  <style>
    .gallery-container {
      max-width: 90rem;
      margin: 0 auto;
      padding: 0 1.5rem;
    }
    .gallery-layout {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
      align-items: center;
    }
    .gallery-item {
      width: 100%;
      max-width: 48rem; /* Full-width images capped at same size as before */
      overflow: hidden;
    }
    @media (min-width: 768px) {
      .gallery-layout {
        gap: 2rem;
      }
      .gallery-item.gallery-half {
        max-width: none;
        width: calc(50% - 1rem); /* Each half image is large */
      }
    }
  </style>
  {% else %}
  <section class="w-full bg-white py-12 md:py-20">
    <div class="max-w-3xl mx-auto px-6">
      <img src="{% static 'images/hollywood_shots/black-tee-front-closeup.jpeg' %}"
           alt="Blueprint Apparel - Hollywood Collection"
           class="w-full h-auto mb-24" />
      <img src="{% static 'images/nature_shots/full-top-side.jpeg' %}"
           alt="Blueprint Apparel - Foundation Collection"
           class="w-full h-auto" />
    </div>
  </section>
  {% endif %}

{% endblock %}

{% block footer %}
  <!-- ============================================ -->
  <!-- FOOTER - OFF-WHITE / MOMA INSPIRED -->
  <!-- ============================================ -->
  <footer class="bg-black text-white">
    <!-- Top border accent -->
    <div class="border-t border-white/10"></div>

    <!-- Footer Header -->
    <div class="border-b border-white/10">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <span class="text-xs tracking-widest uppercase font-medium">Blueprint</span>
        <span class="text-xs tracking-wider text-white/50">EST. 2025</span>
      </div>
    </div>

    <!-- Main Footer Content -->
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-4 border-b border-white/10">

        <!-- Brand Column -->
        <div class="p-6 border-b md:border-b-0 md:border-r border-white/10">
          <img src="{% static 'images/font.webp' %}" alt="Blueprint Apparel" class="h-8 w-auto mb-4" style="filter: brightness(0) invert(1);" />
          <p class="text-white/50 text-xs leading-relaxed">
            Clean, versatile pieces designed for wherever life takes you.
          </p>
        </div>

        <!-- Shop Column -->
        <div class="p-6 border-b md:border-b-0 md:border-r border-white/10">
          <h3 class="text-xs tracking-widest uppercase font-medium mb-4">Shop</h3>
          <ul class="space-y-2">
            <li><a href="{% url 'shop:coming_soon' %}" class="group flex items-center text-white/50 hover:text-white transition-colors text-xs tracking-wide uppercase"><span class="w-3 h-px bg-white/30 mr-2 group-hover:w-5 transition-all"></span>Foundation</a></li>
            <li><a href="{% url 'shop:coming_soon' %}" class="group flex items-center text-white/50 hover:text-white transition-colors text-xs tracking-wide uppercase"><span class="w-3 h-px bg-white/30 mr-2 group-hover:w-5 transition-all"></span>New Arrivals</a></li>
            <li><a href="{% url 'shop:coming_soon' %}" class="group flex items-center text-white/50 hover:text-white transition-colors text-xs tracking-wide uppercase"><span class="w-3 h-px bg-white/30 mr-2 group-hover:w-5 transition-all"></span>Best Sellers</a></li>
          </ul>
        </div>

        <!-- Company Column -->
        <div class="p-6 border-b md:border-b-0 md:border-r border-white/10">
          <h3 class="text-xs tracking-widest uppercase font-medium mb-4">Company</h3>
          <ul class="space-y-2">
            <li><a href="{% url 'shop:about' %}" class="group flex items-center text-white/50 hover:text-white transition-colors text-xs tracking-wide uppercase"><span class="w-3 h-px bg-white/30 mr-2 group-hover:w-5 transition-all"></span>About</a></li>
            <li><a href="{% url 'shop:coming_soon' %}" class="group flex items-center text-white/50 hover:text-white transition-colors text-xs tracking-wide uppercase"><span class="w-3 h-px bg-white/30 mr-2 group-hover:w-5 transition-all"></span>Contact</a></li>
          </ul>
        </div>

        <!-- Connect Column -->
        <div class="p-6">
          <h3 class="text-xs tracking-widest uppercase font-medium mb-4">Connect</h3>
          <div class="flex gap-4 mb-4">
            <a href="https://www.instagram.com/_blueprintapparel" target="_blank" class="text-white/50 hover:text-white transition-colors">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://discord.com/invite/4dNh3zQe" target="_blank" class="text-white/50 hover:text-white transition-colors">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03z"/>
              </svg>
            </a>
          </div>
          <p class="text-white/30 text-xs tracking-wide">Join the community</p>
        </div>

      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center">
      <p class="text-white/30 text-xs tracking-wider mb-3 md:mb-0">
        &copy; 2025 Blueprint Apparel
      </p>
      <div class="flex items-center gap-6">
        <a href="{% url 'shop:privacy' %}" class="text-white/30 hover:text-white text-xs tracking-wider uppercase transition-colors">Privacy</a>
        <span class="w-4 h-px bg-white/20"></span>
        <a href="{% url 'shop:terms' %}" class="text-white/30 hover:text-white text-xs tracking-wider uppercase transition-colors">Terms</a>
      </div>
    </div>
  </footer>

{% endblock %}

{% block extra_js %}
  {{ slideshow_settings|json_script:"slideshow-settings" }}
  <!-- AOS (Animate On Scroll) Initialization -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
      // Slideshow settings from database
      const slideshowSettings = JSON.parse(document.getElementById('slideshow-settings').textContent);
      const slideDuration = slideshowSettings.duration || 5000;
      const slideAutoplay = slideshowSettings.autoplay !== false;
      // Apply hero slide image positioning (responsive)
      function applyHeroPositioning() {
          const isMobile = window.innerWidth < 768;
          document.querySelectorAll('.hero-slide-img').forEach(function(el) {
              const zoom = isMobile
                  ? (parseFloat(el.dataset.mobileZoom) || parseFloat(el.dataset.zoom) || 100)
                  : (parseFloat(el.dataset.zoom) || 100);
              const posX = isMobile
                  ? (parseFloat(el.dataset.mobilePosX) || parseFloat(el.dataset.posX) || 50)
                  : (parseFloat(el.dataset.posX) || 50);
              const posY = isMobile
                  ? (parseFloat(el.dataset.mobilePosY) || parseFloat(el.dataset.posY) || 50)
                  : (parseFloat(el.dataset.posY) || 50);
              const scale = zoom / 100;

              el.style.backgroundPosition = posX + '% ' + posY + '%';
              if (scale !== 1) {
                  el.style.transform = 'scale(' + scale + ')';
                  el.style.transformOrigin = posX + '% ' + posY + '%';
              } else {
                  el.style.transform = '';
                  el.style.transformOrigin = '';
              }
          });
      }
      applyHeroPositioning();
      window.addEventListener('resize', applyHeroPositioning);

      // Apply gallery image positioning
      function applyGalleryPositioning() {
          document.querySelectorAll('.gallery-img').forEach(function(el) {
              const zoom = parseFloat(el.dataset.zoom) || 100;
              const posX = parseFloat(el.dataset.posX) || 50;
              const posY = parseFloat(el.dataset.posY) || 50;
              const scale = zoom / 100;

              el.style.objectFit = 'cover';
              el.style.objectPosition = posX + '% ' + posY + '%';
              if (scale !== 1) {
                  el.style.transform = 'scale(' + scale + ')';
                  el.style.transformOrigin = posX + '% ' + posY + '%';
              }
          });
      }
      applyGalleryPositioning();

      AOS.init({
          duration: 600,
          easing: 'ease-out',
          once: true
      });

      // Auto-hide messages after 4 seconds
      document.addEventListener('DOMContentLoaded', function() {
          const messageContainer = document.getElementById('message-container');
          if (messageContainer) {
              setTimeout(function() {
                  const messages = messageContainer.querySelectorAll('.message-alert');
                  messages.forEach(function(msg) {
                      msg.style.opacity = '0';
                  });
                  setTimeout(function() {
                      messageContainer.style.display = 'none';
                  }, 500); // Wait for fade out animation
              }, 4000); // Show for 4 seconds
          }
      });

      // ============================================
      // SMART SIGNUP FORM DETECTION
      // ============================================

      function detectInputType(value) {
          // Remove whitespace for detection
          const trimmed = value.trim();

          // Email detection: contains @ and basic email pattern
          if (trimmed.includes('@') && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(trimmed)) {
              return 'email';
          }

          // Phone detection: contains mostly numbers, +, -, (, ), or spaces
          if (/^[\d\s\+\-\(\)]+$/.test(trimmed) && trimmed.replace(/\D/g, '').length >= 10) {
              return 'phone';
          }

          // Default to email if it contains @, otherwise phone if it has numbers
          if (trimmed.includes('@')) return 'email';
          if (/\d/.test(trimmed)) return 'phone';

          return 'email'; // default
      }

      // Modal input detection
      function updateModalInputType(input) {
          const type = detectInputType(input.value);
          const hint = document.getElementById('modal-input-hint');
          const disclaimer = document.getElementById('modal-sms-disclaimer');

          if (input.value.trim().length > 0) {
              if (type === 'email') {
                  hint.textContent = '📧 Email detected';
                  hint.classList.remove('opacity-0');
                  hint.classList.add('text-blue-600');
                  hint.classList.remove('text-green-600');
                  disclaimer.classList.add('opacity-0');
              } else {
                  hint.textContent = '📱 Phone number detected';
                  hint.classList.remove('opacity-0');
                  hint.classList.add('text-green-600');
                  hint.classList.remove('text-blue-600');
                  disclaimer.classList.remove('opacity-0');
              }
          } else {
              hint.classList.add('opacity-0');
              disclaimer.classList.add('opacity-0');
          }
      }

      // Main form input detection
      function updateMainInputType(input) {
          const type = detectInputType(input.value);
          const hint = document.getElementById('main-input-hint');
          const disclaimer = document.getElementById('main-sms-disclaimer');

          if (input.value.trim().length > 0) {
              if (type === 'email') {
                  hint.textContent = '📧 Email detected';
                  hint.classList.remove('opacity-0');
                  hint.classList.add('text-blue-600');
                  hint.classList.remove('text-green-600');
                  disclaimer.classList.add('opacity-0');
              } else {
                  hint.textContent = '📱 Phone number detected';
                  hint.classList.remove('opacity-0');
                  hint.classList.add('text-green-600');
                  hint.classList.remove('text-blue-600');
                  disclaimer.classList.remove('opacity-0');
              }
          } else {
              hint.classList.add('opacity-0');
              disclaimer.classList.add('opacity-0');
          }
      }

      // Modal form submission
      function handleModalSmartSubmit(event) {
          event.preventDefault();
          const input = document.getElementById('modal-contact-input');
          const type = detectInputType(input.value);
          const form = event.target;

          // Populate the correct hidden field
          if (type === 'email') {
              document.getElementById('modal-email-field').value = input.value.trim();
              document.getElementById('modal-phone-field').value = '';
              form.action = "{% url 'shop:subscribe' %}";
          } else {
              document.getElementById('modal-phone-field').value = input.value.trim();
              document.getElementById('modal-email-field').value = '';
              form.action = "{% url 'shop:subscribe_sms' %}";
          }

          // Submit the form
          form.submit();
          return false;
      }

      // Main form submission
      function handleMainSmartSubmit(event) {
          event.preventDefault();
          const input = document.getElementById('main-contact-input');
          const type = detectInputType(input.value);
          const form = event.target;

          // Populate the correct hidden field
          if (type === 'email') {
              document.getElementById('main-email-field').value = input.value.trim();
              document.getElementById('main-phone-field').value = '';
              form.action = "{% url 'shop:subscribe' %}";
          } else {
              document.getElementById('main-phone-field').value = input.value.trim();
              document.getElementById('main-email-field').value = '';
              form.action = "{% url 'shop:subscribe_sms' %}";
          }

          // Submit the form
          form.submit();
          return false;
      }

      // ============================================
      // SIGNUP MODAL FUNCTIONALITY
      // ============================================

      let modalAutoShown = false; // Track if modal has auto-shown

      // Open the signup modal
      function openSignupModal() {
          console.log('Opening signup modal...');
          const modal = document.getElementById('signup-modal');
          if (!modal) {
              console.error('Modal not found!');
              return;
          }

          modal.classList.remove('hidden');
          // Trigger animation
          setTimeout(() => {
              modal.classList.remove('opacity-0');
              const modalContent = modal.querySelector('.modal-content');
              if (modalContent) {
                  modalContent.classList.remove('scale-95');
                  modalContent.classList.add('scale-100');
              }
          }, 10);
          // Prevent body scroll
          document.body.style.overflow = 'hidden';
          console.log('Modal opened successfully');
      }

      // Close the signup modal
      function closeSignupModal() {
          console.log('Closing signup modal...');
          const modal = document.getElementById('signup-modal');
          if (!modal) return;

          modal.classList.add('opacity-0');
          const modalContent = modal.querySelector('.modal-content');
          if (modalContent) {
              modalContent.classList.remove('scale-100');
              modalContent.classList.add('scale-95');
          }
          setTimeout(() => {
              modal.classList.add('hidden');
          }, 300);
          // Restore body scroll
          document.body.style.overflow = '';
          // Mark as shown (in-memory only, sessionStorage blocked by browser)
          modalAutoShown = true;
          console.log('Modal closed');
      }


      // Initialize modal functionality - run immediately
      (function() {
          console.log('Modal script loaded');

          // Check if modal was already shown this session
          function wasModalShown() {
              try {
                  return sessionStorage.getItem('modalShown') === 'true';
              } catch (e) {
                  // sessionStorage blocked - check referrer as fallback
                  // If user came from same site, don't show modal
                  const referrer = document.referrer;
                  const currentHost = window.location.host;
                  return referrer && referrer.includes(currentHost);
              }
          }

          function markModalShown() {
              try {
                  sessionStorage.setItem('modalShown', 'true');
              } catch (e) {
                  // sessionStorage blocked, use in-memory flag
                  modalAutoShown = true;
              }
          }

          function initModal() {
              console.log('Initializing modal...');

              // Auto-show modal only on first visit this session
              const alreadyShown = wasModalShown();
              console.log('Modal already shown this session:', alreadyShown);

              if (!alreadyShown) {
                  console.log('Attempting to show modal...');
                  try {
                      openSignupModal();
                      markModalShown();
                  } catch (error) {
                      console.error('Error opening modal:', error);
                  }
              } else {
                  console.log('Modal already shown, skipping');
              }

              // Close modal when clicking outside
              const modal = document.getElementById('signup-modal');
              if (modal) {
                  console.log('Modal element found, adding click listener');
                  modal.addEventListener('click', function(e) {
                      if (e.target === modal) {
                          closeSignupModal();
                      }
                  });
              } else {
                  console.error('Modal element not found!');
              }

              // Close modal with Escape key
              document.addEventListener('keydown', function(e) {
                  if (e.key === 'Escape') {
                      const modal = document.getElementById('signup-modal');
                      if (modal && !modal.classList.contains('hidden')) {
                          closeSignupModal();
                      }
                  }
              });
          }

          // Run immediately if DOM is already loaded, otherwise wait
          if (document.readyState === 'loading') {
              console.log('DOM still loading, waiting for DOMContentLoaded...');
              document.addEventListener('DOMContentLoaded', initModal);
          } else {
              console.log('DOM already loaded, running immediately');
              initModal();
          }
      })();

      // ============================================
      // HERO SLIDESHOW CONTROLS
      // ============================================
      let currentHeroSlide = 1;
      const totalSlides = document.querySelectorAll('.hero-slide').length || 4;

      function changeHeroSlide(slideNum) {
          if (slideNum === currentHeroSlide) return;

          // Get slides
          const currentSlide = document.querySelector('.hero-slide-' + currentHeroSlide);
          const nextSlide = document.querySelector('.hero-slide-' + slideNum);

          // Smooth crossfade: bring next slide to top and fade it in
          // Keep current slide visible underneath until transition completes
          nextSlide.style.zIndex = '3';
          nextSlide.style.opacity = '1';

          // After transition completes, reset z-index and hide old slide
          setTimeout(() => {
              currentSlide.style.opacity = '0';
              currentSlide.style.zIndex = '1';
              nextSlide.style.zIndex = '2';
          }, 450);

          // Update navigation immediately
          document.querySelectorAll('.hero-dot').forEach(dot => {
              dot.classList.remove('bg-white');
              dot.classList.add('bg-white/50');
          });

          const selectedDot = document.querySelector('.hero-dot-' + slideNum);
          selectedDot.classList.remove('bg-white/50');
          selectedDot.classList.add('bg-white');

          currentHeroSlide = slideNum;
      }

      // Auto-advance slideshow
      let slideInterval = null;
      if (slideAutoplay && totalSlides > 1) {
          slideInterval = setInterval(() => {
              const nextSlide = currentHeroSlide < totalSlides ? currentHeroSlide + 1 : 1;
              changeHeroSlide(nextSlide);
          }, slideDuration);
      }

      // ============================================
      // SWIPE & DRAG SUPPORT FOR HERO SLIDESHOW
      // ============================================
      const heroSection = document.querySelector('.scroll-section');
      let startX = 0;
      let isDragging = false;
      let isTransitioning = false;

      // Prevent text selection during drag
      heroSection.style.userSelect = 'none';
      heroSection.style.webkitUserSelect = 'none';
      heroSection.style.cursor = 'grab';

      function handleSwipe(endX) {
          const swipeThreshold = 50;
          const diff = startX - endX;

          if (Math.abs(diff) > swipeThreshold && !isTransitioning) {
              isTransitioning = true;
              if (diff > 0) {
                  // Swipe/drag left - next slide
                  const nextSlide = currentHeroSlide < totalSlides ? currentHeroSlide + 1 : 1;
                  changeHeroSlide(nextSlide);
              } else {
                  // Swipe/drag right - previous slide
                  const prevSlide = currentHeroSlide > 1 ? currentHeroSlide - 1 : totalSlides;
                  changeHeroSlide(prevSlide);
              }
              // Prevent rapid transitions
              setTimeout(() => { isTransitioning = false; }, 1100);
          }
      }

      function resumeAutoAdvance() {
          if (!slideAutoplay || totalSlides <= 1) return;
          clearInterval(slideInterval);
          slideInterval = setInterval(() => {
              const nextSlide = currentHeroSlide < totalSlides ? currentHeroSlide + 1 : 1;
              changeHeroSlide(nextSlide);
          }, slideDuration);
      }

      // Mobile touch support
      heroSection.addEventListener('touchstart', (e) => {
          startX = e.changedTouches[0].screenX;
          if (slideInterval) clearInterval(slideInterval);
      }, { passive: true });

      heroSection.addEventListener('touchend', (e) => {
          handleSwipe(e.changedTouches[0].screenX);
          resumeAutoAdvance();
      }, { passive: true });

      // Desktop mouse drag support
      heroSection.addEventListener('mousedown', (e) => {
          isDragging = true;
          startX = e.screenX;
          heroSection.style.cursor = 'grabbing';
          if (slideInterval) clearInterval(slideInterval);
          e.preventDefault();
      });

      document.addEventListener('mouseup', (e) => {
          if (!isDragging) return;
          isDragging = false;
          heroSection.style.cursor = 'grab';
          handleSwipe(e.screenX);
          resumeAutoAdvance();
      });

      document.addEventListener('mousemove', (e) => {
          if (!isDragging) return;
          e.preventDefault();
      });

      // ============================================
      // SLOW DOWN FOUNDATION VIDEO
      // ============================================
      const foundationVideo = document.getElementById('foundation-video');
      if (foundationVideo) {
          foundationVideo.playbackRate = 0.5; // Play at half speed
      }

      // ============================================
      // MANIFESTO SECTION ANIMATION TRIGGER
      // ============================================
      const manifestoSection = document.getElementById('manifesto-section');
      if (manifestoSection) {
          const observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                  if (entry.isIntersecting) {
                      entry.target.classList.add('in-view');
                  }
              });
          }, { threshold: 0.3 });

          observer.observe(manifestoSection);
      }

      // ============================================
      // SMOOTH SCROLL SNAPPING (Book-like page turning)
      // ============================================
      // The CSS scroll-snap properties handle the smooth snapping behavior
      // User scrolls once and it smoothly transitions to the next section

      // ============================================
      // 3D CARD TILT EFFECT
      // ============================================
      const card = document.getElementById('signup-card');
      if (card) {
          const maxTilt = 4; // Maximum tilt angle in degrees

          card.addEventListener('mousemove', (e) => {
              const rect = card.getBoundingClientRect();
              const x = e.clientX - rect.left;
              const y = e.clientY - rect.top;
              const centerX = rect.width / 2;
              const centerY = rect.height / 2;

              const rotateX = ((y - centerY) / centerY) * -maxTilt;
              const rotateY = ((x - centerX) / centerX) * maxTilt;

              card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
          });

          card.addEventListener('mouseleave', () => {
              card.style.transform = 'rotateX(0deg) rotateY(0deg)';
          });
      }
  </script>

{% endblock %}
